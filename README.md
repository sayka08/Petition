# Petition - Настройка и запуск приложения

# Склонируй репо
git clone https://github.com/sayka08/Petition.git

# Создай вирутальное окружение 
python -m venv venv

# Активация виртуального окружения на Windows
venv\Scripts\activate 

# Активация виртуального окружения на MacOS/Linux
source venv/bin/activate

# В корне проекта создай файл .env и добавь переменную как в .env_example
# URL будет указывать на твою локальную БД
SQL_DB_URL = "your db_url" # for example sqlite:///./db/name.db

# Создай папку db, в db будет храниться БД 
mkdir db

# Собери docker - образ
docker-compose build

# Запусти контейнер 
docker-compose up

# Petition - Тестирование АПИ

# Открой Swagger UI 
http://localhost:8000/docs

<!--
Инструкция по тестированию АПИ в Сваггере: на каждом эндпоинте есть кнопка
"Try it out" необходимо нажимать на нее, а далее подставлять значения в поля 
и нажимать на кнопку ниже Execute, тем самым отправляется запрос, ниже можем увидеть
респонс на запрос в виде статус кода, заголовков и самого тела ответа
-->

# Создание пользователя 
POST /users/
{
  "username": "string",
  "password": "string"
}

<!--
поле username имеет признак unique, при попытке добавления пользователя
с одинаковым username сервер отдаст ошибкой 500 Internal Server Error
-->

# Получение jwt - токена
POST /token
{
  "username": "string",
  "password": "string"
}

<!--
получение токена происходит только по зарегистрированным пользователям,
то есть сначала необходимо создать пользователя, а затем использовать данные
для получения токена который будет приходить в access_token,
иначе пользователь получачет 401 ошибку Unauthorized
и ответ "Invalid credentials"
-->

# Создание петиции
POST /petitions/
{
  "title": "string",
  "description": "string"
}

<!--
в ответе на запрос ожидаем получить ответ
{
  "title": "string",
  "description": "string",
  "id": 0,
  "votes_count": 0,
  "created_at": "2024-11-11T13:58:42.900Z"
}
-->

# Голосование за петицию
POST /votes/
{
  "petition_id": 0
}

<!--
эндпоинт post /votes/ требует аутентификации в виде отправки токена
при первом запросе, ниже под эндпоинтом отобразится форма ввода токена
с name равным token где необходимо ввести токен полученный по /token
-->

# Удаление голоса
DELETE /votes/

<!--
эндпоинт delete /votes/ требует аутентификации в виде отправки токена
при запросе, ниже под эндпоинтом отобразится форма ввода токена
с name равным token где необходимо ввести токен полученный по /token, 
также отобразится форма petition_id в которой необходимо ввести int значение
в виде айди петиции которой мы хотим удалить, также при попытке удалить чужой голос
пользователю ответят 404 ошибкой Not Found 
"Vote not found for this user"
-->

# Получение списка петиций 
GET /petitions/

<!--
в получении петиций реализована пагинация в виде skip (page) и limit,
т.е каждый page (по дефолту 1 page по индексу) имеет limit (по дефолту 2 петиции),
условно мы хотим получить все петиции (page=0 and limit=100),
также реализована фильтрация по title петиции, вводим title петиции 
и получаем все петиции с данным title, также реализована сортировка,
можем сортировать по дате создания петиции (created_at) и по количеству голосов петиции
(votes_count), направление сортировки задается в возврастающем и убывающем (asc и desc),
в ответе на гет запрос ожидаем получить список петиций
-->






















